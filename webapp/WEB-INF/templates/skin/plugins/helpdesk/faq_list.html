<#macro getParentSubject subject faq breadcrumb >
    <#if subject?has_content && faq?has_content>
        <#if breadcrumb == "">
            <#assign breadcrumbCopy = "<a href=\"jsp/site/Portal.jsp?page=${path_label}&faq_id=${faq.id}#${anchor_subject}${subject.id}\">${subject.text}</a>" />
        <#else>
            <#assign breadcrumbCopy = "<a href=\"jsp/site/Portal.jsp?page=${path_label}&faq_id=${faq.id}#${anchor_subject}${subject.id}\">${subject.text}</a>" + " &gt; " + breadcrumb />
        </#if>
        <#if subject.getParent(plugin)?has_content && subject.idParent != 0 >
            <@getParentSubject subject=subject.getParent(plugin) faq=faq breadcrumb=breadcrumbCopy />
        <#else>
            <a class="top" href="jsp/site/Portal.jsp?page=${path_label}#top">#i18n{helpdesk.question_list_row.top}</a>
            <a href="jsp/site/Portal.jsp?page=${path_label}&faq_id=${faq.id}">${faq.name}</a> &gt; ${breadcrumbCopy}
        </#if>
    </#if>
</#macro>

<#if faq_list?has_content >
<div class="span-15 prepend-1 append-1 append-bottom">
    <div class="portlet -lutece-border-radius">
        <a name="top"></a>
        <h2 class="page-title">#i18n{helpdesk.faq_list.portlet_search.title}</h2>
        <form class="default-form" name="form_search" method="post">
            <fieldset>
                <label class="text-label" for="form_search_keywords">#i18n{helpdesk.faq_list.portlet_search.labelSearch} : </label>
                <input type="text" size="30" id="form_search_keywords" name="form_search_keywords" value="${(filter_searched_keywords!"")?html}" class="-lutece-input -lutece-border-radius-mini" />
                <br/>
                <label class="text-label" for="">&nbsp;</label>
                <em>#i18n{helpdesk.faq_list.portlet_search.labelInfoSearch}</em>
                <br />
                <label class="text-label" for="form_search_date_begin">#i18n{helpdesk.faq_list.portlet_search.labelDateBegin} : </label>
                <input type="text" class="dateRange" size="10" id="form_search_date_begin" name="form_search_date_begin" value="${(filter_date_begin!"")?html}" />
                #i18n{helpdesk.faq_list.portlet_search.labelDateEnd} : 
                <input type="text" class="dateRange" size="10" id="form_search_date_end" name="form_search_date_end" value="${(filter_date_end!"")?html}" />
                <br />
                <p class="buttons">
                    <input type="hidden" name="page" value="${path_label}" />
                    <input id="button-search" class="-lutece-input -lutece-border-radius-mini" type="submit" name="form_search_submit" value="#i18n{helpdesk.faq_list.portlet_search.buttonLabelSearch}" />
                </p>
            </fieldset>
        </form>
        <#if search_page>
            <#if helpdesk_question_answer_list?has_content>
                <ul id="questionAnswer">
                    <#list helpdesk_question_answer_list as questionAnswer>
                        <li>
                        <#assign currentSubject = questionAnswer.getSubject(plugin)>
                        <@getParentSubject subject=currentSubject faq=currentSubject.getFaq(plugin) breadcrumb="" />
                        <br />
                        <a name="${questionAnswer.idQuestionAnswer}"></a>
                        <strong>${questionAnswer.question}</strong>
                        <blockquote>${questionAnswer.answer}</blockquote>
                        </li>
                    </#list>
                </ul>
            <#else>
                <blockquote>#i18n{helpdesk.message.search_nok}</blockquote>
            </#if>
        </#if>
    </div>
</div>
</#if>

<div id="content" class="span-6 append-1 append-bottom last">
	<div class="portlet -lutece-border-radius">
    	<a name="top"></a>
        <h2 class="page-title">#i18n{helpdesk.faq_list.portlet_list.title}</h2>
		<#if faq_list?has_content >	
			<ul>
				<#list faq_list as faq>
					<li><a href="jsp/site/Portal.jsp?page=helpdesk&faq_id=${faq.id}">${faq.name}</a></li>
				</#list>
			</ul>
		<#else>
			<em>#i18n{helpdesk.faq_list.emptyList}</em>
		</#if>
	</div>
</div>

<@getDatePickerRange idFieldFrom="form_search_date_begin" idFieldTo="form_search_date_end" language=locale.language />